<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Model Comparison Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="container mx-auto px-4 py-8 md:py-12 max-w-screen-xl">
        <!-- Header Section -->
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-slate-900">AI Model Comparison Tool</h1>
            <p class="text-lg text-slate-600 mt-2">Compare responses from different AI models side by side</p>
        </header>

        <!-- Input Section -->
        <div class="bg-white p-4 rounded-lg shadow-sm border border-slate-200 mb-6">
            <div class="flex flex-col md:flex-row items-start gap-4">
                <textarea 
                    id="prompt-input" 
                    class="w-full h-24 md:h-auto resize-none p-3 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200" 
                    placeholder="Enter your question or prompt here... e.g., 'What is the capital of Sri Lanka?'"
                ></textarea>
                <button id="compare-button" class="w-full md:w-auto bg-blue-600 text-white font-semibold px-6 py-3 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-200 disabled:bg-slate-400 disabled:cursor-not-allowed">
                    Compare Models
                </button>
            </div>
        </div>
        
        <!-- Status and Results Section -->
        <div id="status-container" class="text-center mb-6">
             <p id="status-text" class="text-slate-500 transition-all duration-300">Enter a prompt and click compare to see results.</p>
        </div>

        <main id="results-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6">
            <!-- Initial content will be populated by the script -->
            <div class="bg-white rounded-lg shadow-md overflow-hidden flex flex-col">
                <div class="bg-teal-500 text-white p-3 font-bold text-lg">
                    DeepSeek
                </div>
                <div class="p-4 text-slate-700 flex-grow">
                   <p>Enter a prompt above to see the response.</p>
                </div>
            </div>
            <div class="bg-white rounded-lg shadow-md overflow-hidden flex flex-col">
                <div class="bg-orange-500 text-white p-3 font-bold text-lg">
                  Claude Opus 4.1
                </div>
                <div class="p-4 text-slate-700 flex-grow">
                   <p>Enter a prompt above to see the response.</p>
                </div>
            </div>
            <div class="bg-white rounded-lg shadow-md overflow-hidden flex flex-col">
                <div class="bg-purple-500 text-white p-3 font-bold text-lg">
                    Qwen AI
                </div>
                <div class="p-4 text-slate-700 flex-grow">
                     <p>Enter a prompt above to see the response.</p>
                </div>
            </div>
            <div class="bg-white rounded-lg shadow-md overflow-hidden flex flex-col">
                <div class="bg-red-500 text-white p-3 font-bold text-lg">
                    GPT OSS
                </div>
                <div class="p-4 text-slate-700 flex-grow">
                     <p>Enter a prompt above to see the response.</p>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const compareBtn = document.getElementById('compare-button');
            const userQuery = document.getElementById('prompt-input');
            const statusEl = document.getElementById('status-text');
            const resultsContainer = document.getElementById('results-container');
            
            // NOTE: The code from your image uses placeholder API keys.
            // This application simulates different models using a single API endpoint with different instructions (system prompts),
            // so separate API keys are not required for this specific implementation.
            
            const API_KEYS = {
                deepseek: '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',
                qwen: 'sk-or-v1-952616648403eb6b086cd2e261513f490eef24b2565147c075d5af23a734f96',
                gpt: 'sk-or-v1-c3051139970ac5c56866218a98d8185bef162a44f04349f754df4ac280d5d',
                Deepcoder: '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',
                'Claude Opus 4.1': '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'
            };
            
            
            const modelCards = [
                { name: 'DeepSeek', color: 'bg-teal-500' },
                { name: 'Deepcoder', color: 'bg-sky-500' },
                { name: 'Claude Opus 4.1', color: 'bg-orange-500' },
                { name: 'Qwen AI', color: 'bg-purple-500' },
                { name: 'GPT OSS', color: 'bg-red-500' }
            ];

            // Add event listener to button
            compareBtn.addEventListener('click', handleCompare);
            userQuery.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    handleCompare();
                }
            });


            async function handleCompare() {
                const userPrompt = userQuery.value.trim();
                if (!userPrompt) {
                    statusEl.textContent = 'Please enter a prompt before comparing.';
                    statusEl.classList.remove('text-slate-500', 'text-green-600');
                    statusEl.classList.add('text-red-600');
                    return;
                }

                // 1. Setup UI for loading
                statusEl.textContent = 'Comparing models...';
                statusEl.classList.remove('text-green-600', 'text-red-600', 'hidden');
                statusEl.classList.add('text-slate-500');
                compareBtn.disabled = true;
                compareBtn.textContent = 'Comparing...';
                
                // Show loading skeletons
                resultsContainer.innerHTML = modelCards.map(model => `
                    <div class="bg-white rounded-lg shadow-md overflow-hidden flex flex-col animate-pulse">
                        <div class="${model.color} text-white p-3 font-bold text-lg">
                            ${model.name}
                        </div>
                        <div class="p-4 space-y-3">
                            <div class="h-4 bg-slate-200 rounded w-5/6"></div>
                            <div class="h-4 bg-slate-200 rounded w-full"></div>
                            <div class="h-4 bg-slate-200 rounded w-3/4"></div>
                            <div class="h-4 bg-slate-200 rounded w-1/2"></div>
                        </div>
                    </div>
                `).join('');


                // 2. Define "personas" for the simulated models
                const systemPrompts = {
                    DeepSeek: "You are DeepSeek, an AI model known for direct and concise answers. Respond to the user's prompt in a straightforward manner.",
                    Deepcoder: "You are Deepcoder, an AI model that specializes in providing technical explanations and code examples. Respond to the user's prompt from a developer's perspective.",
                    'Claude Opus 4.1': "You are Claude Opus, an AI model that prioritizes helpfulness, harmlessness, and ethical considerations. Provide a thoughtful, nuanced, and safe response.",
                    'Qwen AI': "You are Qwen AI, an AI model that provides comprehensive and slightly more detailed answers. Elaborate a little on the user's prompt.",
                    'GPT OSS': "You are GPT OSS, an open-source AI model that often gives a balanced and well-structured answer. Provide a helpful and clear response to the user's prompt."
                };

                // 3. Make API calls in parallel
                const promises = modelCards.map(model =>
                    callGeminiApi(userPrompt, systemPrompts[model.name])
                );

                try {
                    const responses = await Promise.all(promises);

                    // 4. Populate results
                    resultsContainer.innerHTML = responses.map((text, index) => {
                        const model = modelCards[index];
                        // Basic markdown for bold text **text** -> <strong>text</strong>
                        const formattedText = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\n/g, '<br>');
                        return `
                            <div class="bg-white rounded-lg shadow-md overflow-hidden flex flex-col">
                                <div class="${model.color} text-white p-3 font-bold text-lg">
                                    ${model.name}
                                </div>
                                <div class="p-4 text-slate-700 flex-grow">
                                    <p>${formattedText}</p>
                                </div>
                            </div>
                        `;
                    }).join('');

                    statusEl.textContent = 'Comparison complete!';
                    statusEl.classList.remove('text-slate-500', 'text-red-600');
                    statusEl.classList.add('text-green-600');

                } catch (error) {
                    console.error("API call failed:", error);
                    resultsContainer.innerHTML = `<p class="text-red-600 text-center col-span-full">An error occurred while fetching responses. Please check the console and try again.</p>`;
                    statusEl.textContent = 'An error occurred. Please try again.';
                    statusEl.classList.remove('text-slate-500', 'text-green-600');
                    statusEl.classList.add('text-red-600');
                } finally {
                    // 5. Reset button
                    compareBtn.disabled = false;
                    compareBtn.textContent = 'Compare Models';
                }
            }


            async function callGeminiApi(userQuery, systemPromptText) {
                const apiKey = ""; // Canvas will provide this
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                const payload = {
                    contents: [{ parts: [{ text: userQuery }] }],
                    systemInstruction: {
                        parts: [{ text: systemPromptText }]
                    },
                };

                let response;
                let delay = 1000;
                for (let i = 0; i < 5; i++) {
                    try {
                        response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (response.ok) {
                            const result = await response.json();
                            const candidate = result.candidates?.[0];
                            if (candidate && candidate.content?.parts?.[0]?.text) {
                                return candidate.content.parts[0].text;
                            } else {
                               const errorText = result?.promptFeedback?.blockReason?.toString() || 'Invalid response structure from API.';
                               throw new Error(errorText);
                            }
                        } else if (response.status === 429) { // Throttling
                            console.warn(`API rate limit hit. Retrying in ${delay}ms...`);
                            await new Promise(resolve => setTimeout(resolve, delay));
                            delay *= 2;
                            continue; // Go to next loop iteration for retry
                        }
                        else {
                             throw new Error(`API request failed with status ${response.status}`);
                        }
                    } catch (error) {
                        if (i === 4) { // Last attempt failed
                             console.error(`Final attempt failed for prompt "${userQuery}" with system prompt "${systemPromptText}":`, error);
                             return `Sorry, I couldn't get a response for this model. Error: ${error.message}`;
                        }
                        console.warn(`Attempt ${i + 1} failed. Retrying in ${delay}ms...`, error);
                        await new Promise(resolve => setTimeout(resolve, delay));
                        delay *= 2;
                    }
                }
                return "Failed to get a response after multiple retries."; // Fallback
            }
        });
    </script>
</body>
</html>


